set of updated instructions for your project. This consolidates everything we've built: core principles, tech stack reuse, repo overview, full platform architecture, and the detailed phased roadmap (including MVP flows, capital tracking, multi-fund flexibility, and Phase 3 expansions like startup equity/Carta features). Paste this directly into replit.md, README.md, or a new docs/project-instructions.md in your repo. It serves as a plan for Replit Agent prompts—use the included ones to automate builds. This keeps the platform versatile for 506(c) funds (e.g., your Bermuda Franchise example with tiered units, 2.5% fees, $1.8M initial threshold/$9.55M full raise) and future startup equity.
Project Overview
This is a customized fork of Papermark, evolving into a secure dataroom and LP portal for General Partners (GPs) managing private investments under 506(c) rules. It provides tech-driven capital raises, transactions, and reporting. The "uniquefundroom" (per-LP dashboard + storage) is a personalized, secure space post-account, including fund data, signed docs, notes, and hooks for automations like Plaid payments and Persona KYC.
The platform is flexible for multi-fund/startup use: Toggle entity modes ('FUND' for units/tiers/calls vs. 'STARTUP' for shares/price per share/vesting like Carta). Focus on linear flows (dataroom → "Sign Me Up" → account → NDA gate → dashboard unlock → subscriptions).
Core Principles:
· UX-First: Mobile-responsive (Tailwind/shadcn/ui), minimal clicks, clear CTAs (e.g., big "Sign Me Up" button). Use guided wizards for onboarding (e.g., step-by-step NDA + accreditation).
· Ease/Simple Steps: Break everything into linear flows (e.g., dataroom → button → account create → NDA gate → dashboard unlock).
· Build on Existing: Leverage Next.js routes, Prisma models (e.g., extend User/Team for Investor), self-hosted e-sign (custom React drag-drop), Resend emails, webhooks, and Stripe integrations. No external APIs like OpenSign—keep it internal.
· 506(c) Compliance: Embed accreditation self-ack, audit logs (IP/timestamps/user agent via Prisma), and hooks for KYC/AML (e.g., Persona API post-NDA).
· Tech Stack Reuse: Next.js (routes/UI), TypeScript, Prisma/PostgreSQL (new models for LP data), NextAuth (enhanced for LP logins), Tinybird (analytics, configure TINYBIRD_TOKEN later), Stripe (payments), blob storage (S3/Vercel).
· Testing/Deployment: Use Replit for prototyping (Agent-assisted), then Vercel for prod. Add Jest for E2E tests.
Repo Status (as of Latest Push):
· Core: Papermark fork for secure sharing/analytics/branding/self-hosting. Customizations for LP portals: dataroom access, investor tracking, e-sign flows.
· Directory: src/ (routes like /api, /sign, /view; components for UI; lib for utils; context for state). prisma/ (models: User, Team, Document, Link, Visit, Signature*; extended for Investor, BankLink, Transaction). docs/ (OpenSign guides, roadmaps, runbooks—lacks API/storage depth). public/ (fund assets). .github/workflows (CI/CD). ee/ (enterprise tweaks). middleware.ts (auth/webhooks).
· Integrations: Plaid (banking), Persona (KYC), Resend (emails), Tinybird (analytics).
· Recent Commits: LP-focused (Plaid/transfers, bank linking); admin mirroring (aggregates, roles); docs polish (Git workflows, Plaid details).
· Gaps Filled: Role enums ('LP'/'GP'), middleware for isolation (LPs see own + fund data), admin dashboards mirroring LP.
Platform Architecture:
The architecture is a modular Next.js app for secure, compliant portals. Data portability via /api/export (JSON/CSV + ZIP blobs) for migrations (e.g., to AWS).
· Frontend: Next.js pages/routes (e.g., /dataroom, /lp/dashboard, /admin/fund/[id]). Components: shadcn/ui modals/wizards (e-sign drag-drop, subscription push). Styling: Tailwind (mobile-responsive CTAs).
· Backend: API routes (/api/subscriptions, /api/transactions). Middleware: NextAuth (roles/gating), webhooks (Plaid updates Prisma, Resend notifications).
· Data Layer: Prisma/PostgreSQL. Key Models: Entity (mode 'FUND'/'STARTUP', configs like thresholds/fees/pricing tiers), Investor (fundId, signedDocs), Subscription (amount, status), Transaction (in/out, audits), Share (startup: pricePerShare, vesting). Relations: Multi-entity (1:M Investor/Subscription). Analytics: Tinybird.
· Integrations: Plaid (transfers), Stripe (hybrid), Persona (KYC), Resend (emails), blob storage (S3-compatible). Hooks: Wolters Kluwer (K1), QuickBooks (expenses).
· Deployment: Replit proto (npm run dev), Vercel prod (.github/workflows CI/CD). Testing: Jest E2E.
· Security/Compliance: Audit JSON (IP/timestamps), role-based isolation (LPs see personal data only), self-ack/KYC wizards.