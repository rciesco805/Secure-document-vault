Error Monitoring with Rollbar (Integration Guide)
Rollbar provides real-time error tracking, grouping similar issues, source maps support, and session replaysâ€”ideal for debugging LP flows, API routes, and compliance logs. It's Replit-compatible (no compilation issues like Sentry) and free for prototyping. Integrate post-Phase 1 or during Phase 2 for automations.
What You Need to Do (Manual Steps):

Sign up for a free Rollbar account at https://rollbar.com/signup/ (use your email; no credit card needed for free tier).
Create a new project in Rollbar (e.g., "Secure-Document-Vault-Proto").
Get your access tokens: From the project settings > Access Tokens, copy the "Post Client Item" token (for client-side) and "Post Server Item" token (for server-side).
In Replit, add these to your .env file (Secrets tab for security): NEXT_PUBLIC_ROLLBAR_CLIENT_TOKEN=your_client_token_here and ROLLBAR_SERVER_TOKEN=your_server_token_here. Note: Only prefix client token with NEXT_PUBLIC to make it available in browser code.
After integration, test by triggering errors (e.g., throw new Error('Test error') in a route) and check your Rollbar dashboard for reports.
For prod on Vercel: Add the same env vars to Vercel project settings; Rollbar auto-integrates with Vercel for deployments.

Series of Replit Agent Prompts (Copy-Paste These Sequentially):
Use these in order to automate the integration. Each builds on the previous; run in your Secure-document-vault workspace.

Install Packages: "In Secure-document-vault repo, install Rollbar packages: Run npm install rollbar @rollbar/react. Update package.json if needed. Commit changes."
Create Config File: "Add a new file src/rollbar.ts with Rollbar configuration. Include: import Rollbar from 'rollbar'; const baseConfig = { captureUncaught: true, captureUnhandledRejections: true, environment: process.env.NODE_ENV }; export const clientConfig = { accessToken: process.env.NEXT_PUBLIC_ROLLBAR_CLIENT_TOKEN, ...baseConfig }; export const serverInstance = new Rollbar({ accessToken: process.env.ROLLBAR_SERVER_TOKEN, ...baseConfig }); UX: Keep it simple, no extras. Commit."
Wrap Root Layout (App Router): "In src/app/layout.tsx, wrap the app with RollbarProvider: import { Provider as RollbarProvider } from '@rollbar/react'; import { clientConfig } from '@/rollbar'; Then in RootLayout: <RollbarProvider config={clientConfig}><html lang="en"><body>{children}</body></html></RollbarProvider>. Adjust paths if needed (e.g., src/rollbar.ts). Commit."
Add Error Handler: "Create src/app/error.tsx as a client component: 'use client'; import { useEffect } from 'react'; import { useRollbar } from '@rollbar/react'; export default function Error({ error, reset }) { const rollbar = useRollbar(); useEffect(() => { rollbar.error(error); }, [error, rollbar]); return Something went wrong. <button onClick={reset}>Try again</button>; } Use shadcn/ui for styling if possible. Commit."
Add Global Error Handler: "Create src/app/global-error.tsx: 'use client'; import { useEffect } from 'react'; import Rollbar from 'rollbar'; import { clientConfig } from '@/rollbar'; export default function GlobalError({ error, reset }) { useEffect(() => { const rollbar = new Rollbar(clientConfig); rollbar.error(error); }, [error]); return <html><body>Something went wrong. <button onClick={reset}>Try again</button></body></html>; } Commit."
Integrate with Middleware (Server-Side): "In middleware.ts, add server-side error capture: Import { serverInstance } from '@/rollbar'; Wrap middleware logic in try-catch: try { ... } catch (error) { serverInstance.error(error); throw error; } Tie into existing auth/webhooks. Commit."
Optional: Tie to Resend Alerts: "In src/lib/utils.ts or a new hook, add function to send Resend email on critical errors: Import Resend and serverInstance. Use serverInstance.addPayloadProcessor to hook: e.g., if (error.level === 'critical') { resend.emails.send({ from: 'alerts@yourdomain.com', to: 'you@email.com', subject: 'Critical Error', text: error.message }); } Configure RESEND_API_KEY in .env. Commit."
Test Integration: "Add a test route /api/test-error: export async function GET() { throw new Error('Rollbar test error'); } Run npm run dev, hit the route, and verify in Rollbar dashboard. Add E2E Jest test for error capture. Commit."